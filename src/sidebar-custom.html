---
title: 手刻 side bar
layout: ./src/layout.ejs
engine: ejs
current: nav-link06
---
<!-- 會跟套件樣式衝突 不使用 -->
<div class="overlay"></div>
<nav id="sideNav" class="side-nav">
  <h2 class="side-nav__title">手刻 side bar</h2>
  <a href="./sidemenu.html" class="side-nav__link">關閉推播</a>
  <a href="./login.html" class="side-nav__link">登出</a>
</nav>
<div
  class="fixed top-0 left-0 right-0 w-full flex justify-between items-center bg-white px-4 py-2"
>
  <button
    id="btnSideBar"
    class="flex justify-center items-center py-2 cursor-pointer bg-primary text-white rounded-full w-8 h-8"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="currentColor"
      class="w-5 h-5"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"
      />
    </svg>
  </button>
</div>
<script>
  const sideNav = document.getElementById('sideNav');
  const btnSideBar = document.getElementById('btnSideBar');
  let isNavOpen = false;

  function openSideMenu(e) {
    e.stopPropagation();
    const body = document.body;
    const scrollY =
      document.documentElement.style.getPropertyValue('--scroll-y');
    body.style.top = `-${scrollY}`;
    body.classList.add('my-modal-open');
    isNavOpen = true;
  }

  function closeSideMenu(e) {
    const body = document.body;
    e.stopPropagation();
    if (e.target !== sideNav && isNavOpen) {
      const scrollY = body.style.top;
      body.style.position = '';
      body.style.top = '';
      window.scrollTo(0, parseInt(scrollY || '0') * -1);
      body.classList.remove('my-modal-open');
    }
    isNavOpen = false;
  }

  btnSideBar.addEventListener('click', openSideMenu);
  document.addEventListener('click', closeSideMenu);
  window.addEventListener('scroll', () => {
    document.documentElement.style.setProperty(
      '--scroll-y',
      `${window.scrollY}px`
    );
  });
</script>
